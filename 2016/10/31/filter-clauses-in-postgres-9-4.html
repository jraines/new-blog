<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <link href="../../../stylesheets/syntax.css" rel="stylesheet" type="text/css" />
    <link href="../../../stylesheets/main.css" rel="stylesheet" type="text/css" />

    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

    <title>Jeremy Raines - FILTER clauses in Postgres 9.4+</title>

    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
  </head>
  <body>
    <div id="main" role="main">
      <h1>FILTER clauses</h1>

<p>In Postgres 9.4, aggregate functions can take FILTER clauses that replace the functionality previously provided by </p>
<pre><code class="highlight sql"><span class="k">sum</span><span class="p">(</span><span class="k">case</span> <span class="n">foo</span> <span class="k">when</span> <span class="n">bar</span> <span class="k">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span> <span class="k">end</span><span class="p">)</span>
</code></pre>

<p>like so:</p>
<pre><code class="highlight sql"><span class="k">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">filter</span> <span class="p">(</span><span class="k">where</span> <span class="n">foo</span> <span class="k">is</span> <span class="n">bar</span><span class="p">)</span><span class="nv">`
</span></code></pre>

    </div>
  </body>
</html>
